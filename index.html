<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday! üéâ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Video Intro Overlay */
        #videoOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        #videoOverlay.hidden {
            display: none;
        }

        #introVideo {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
        }

        #tapToPlay {
            position: absolute;
            color: white;
            font-size: 24px;
            background: rgba(255, 255, 255, 0.2);
            padding: 20px 40px;
            border-radius: 50px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: pulse 2s infinite;
        }

        #skipButton {
            position: absolute;
            bottom: 80px;
            color: white;
            font-size: 18px;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 30px;
            border-radius: 50px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            z-index: 10001;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        #videoStatus {
            position: absolute;
            bottom: 30px;
            color: white;
            font-size: 18px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 20px;
        }

        /* Main Container */
        #mainContainer {
            display: flex;
            opacity: 1;
        }

        #mainContainer.hidden {
            display: none;
        }

        /* Sidebar Navigation */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background: rgba(30, 30, 46, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
            padding: 40px 0;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .sidebar h1 {
            text-align: center;
            color: #7c3aed;
            font-size: 28px;
            margin-bottom: 50px;
            padding: 0 20px;
        }

        .nav-btn {
            display: block;
            width: 100%;
            padding: 20px 30px;
            background: none;
            border: none;
            text-align: left;
            font-size: 18px;
            color: #e6e6e6;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-btn:hover {
            background: linear-gradient(90deg, #7c3aed 0%, #5b21b6 100%);
            color: white;
            transform: translateX(5px);
        }

        .nav-btn.active {
            background: linear-gradient(90deg, #7c3aed 0%, #5b21b6 100%);
            color: white;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 0;
            background: #7c3aed;
            transition: height 0.3s ease;
        }

        .nav-btn.active::before {
            height: 60%;
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 101;
            background: #1e1e2e;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .menu-toggle span {
            display: block;
            width: 25px;
            height: 3px;
            background: #7c3aed;
            margin: 5px 0;
            transition: 0.3s;
        }

        /* Main Content */
        .main-content {
            margin-left: 250px;
            padding: 60px;
            width: calc(100% - 250px);
            min-height: 100vh;
        }

        .page {
            display: none;
            animation: fadeIn 0.8s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Page Headers */
        .page-header {
            background: rgba(30, 30, 46, 0.8);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .page-header h2 {
            color: #7c3aed;
            font-size: 36px;
            margin-bottom: 10px;
        }

        .page-header p {
            color: #b8b8b8;
            font-size: 18px;
        }

        .section-header {
            color: #7c3aed;
            font-size: 28px;
            margin: 40px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(124, 58, 237, 0.3);
        }

        /* Photos Page */
        .photos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }

        .gallery-item {
            background: rgba(30, 30, 46, 0.8);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .gallery-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .gallery-item img {
            width: 100%;
            height: 250px;
            object-fit: contain;
            background: rgba(30, 30, 46, 0.8);
            display: block;
        }

        .gallery-item-info {
            padding: 15px;
            text-align: center;
            color: #e6e6e6;
        }

        /* Videos Page */
        .videos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .video-card {
            background: rgba(30, 30, 46, 0.8);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .video-thumbnail {
            position: relative;
            width: 100%;
            height: 200px;
            background: rgba(30, 30, 46, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .video-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(124, 58, 237, 0.8);
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 24px;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .play-button:hover {
            background: rgba(124, 58, 237, 1);
            transform: translate(-50%, -50%) scale(1.1);
        }

        .video-info {
            padding: 20px;
        }

        .video-title {
            font-weight: bold;
            font-size: 18px;
            margin-bottom: 10px;
            color: #e6e6e6;
        }

        .video-date {
            font-size: 14px;
            color: #b8b8b8;
        }

        /* Full-screen viewer */
        .fullscreen-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .fullscreen-viewer.active {
            display: flex;
        }

        .viewer-content {
            max-width: 95%;
            max-height: 95%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .viewer-content img,
        .viewer-content video {
            max-width: 100%;
            max-height: 95vh;
            border-radius: 10px;
            object-fit: contain;
        }

        .viewer-close {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 40px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.7);
            border: none;
            padding: 5px 15px;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            transition: background 0.3s ease;
        }

        .viewer-close:hover {
            background: rgba(255, 0, 0, 0.7);
        }

        .viewer-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 40px;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            padding: 10px 15px;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .viewer-nav:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .viewer-prev {
            left: 20px;
        }

        .viewer-next {
            right: 20px;
        }

        /* About Us Page */
        .about-content {
            background: rgba(30, 30, 46, 0.8);
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            max-width: 900px;
            margin: 0 auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .about-content h2 {
            color: #7c3aed;
            font-size: 36px;
            margin-bottom: 30px;
            text-align: center;
        }

        .about-text {
            font-size: 18px;
            line-height: 1.8;
            color: #b8b8b8;
            margin-bottom: 40px;
            text-align: center;
        }

        .about-images {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .about-image {
            width: 300px;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .about-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                width: 80%;
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .menu-toggle {
                display: block;
            }

            .main-content {
                margin-left: 0;
                width: 100%;
                padding: 30px 20px;
                padding-top: 80px;
            }

            .page-header h2 {
                font-size: 28px;
            }

            .photos-container {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }

            .videos-container {
                grid-template-columns: 1fr;
            }

            .about-content {
                padding: 30px 20px;
            }

            .about-image {
                width: 100%;
                max-width: 300px;
            }

            .viewer-nav {
                font-size: 30px;
                padding: 8px 12px;
            }

            .viewer-prev {
                left: 10px;
            }

            .viewer-next {
                right: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Video Intro Overlay -->
    <div id="videoOverlay" class="hidden">
        <video id="introVideo" playsinline>
            <source src="wish.mp4" type="video/mp4">
        </video>
        <div id="tapToPlay">Tap to Play üéâ</div>
        <div id="skipButton">Skip Videos</div>
        <div id="videoStatus"></div>
    </div>

    <!-- Main Container -->
    <div id="mainContainer">
        <!-- Mobile Menu Toggle -->
        <button class="menu-toggle" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- Sidebar Navigation -->
        <nav class="sidebar" id="sidebar">
            <h1>üéÇSnegha Birthday</h1>
            <button class="nav-btn active" onclick="showPage('photos')">üì∏ Memory Photos</button>
            <button class="nav-btn" onclick="showPage('videos')">üé• Memory Videos</button>
            <button class="nav-btn" onclick="showPage('about')">üíù Developed By</button>
            <button class="nav-btn" onclick="playVideoAgain()">‚ñ∂Ô∏è Play Video</button>
        </nav>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Photos Page -->
            <div id="photos" class="page active">
                <div class="page-header">
                    <h2>Memory Photos üì∏</h2>
                    <p>Relive the beautiful moments captured in photos</p>
                </div>
                
                <div class="photos-container" id="photosGrid">
                    <!-- Photo items will be dynamically generated -->
                </div>
            </div>

            <!-- Videos Page -->
            <div id="videos" class="page">
                <div class="page-header">
                    <h2>Memory Videos üé•</h2>
                    <p>Watch Videos</p>
                </div>
                
                <div class="videos-container" id="videosGrid">
                    <!-- Video items will be dynamically generated -->
                </div>
            </div>

            <!-- About Us Page -->
            <div id="about" class="page">
                <div class="about-content">
                    <h2>Developed By me üéâ‚ú® @roman_raj_kings</h2>
                    <p class="about-text">
                        Happy Birthday Snegha üéâ‚ú®
                    </p>
                    <div class="about-images">
                        <div class="about-image">
                            <img src="images/red (13).jpg" alt="Friendship 1">
                        </div>
                        <div class="about-image">
                            <img src="images/red (10).jpg" alt="Friendship 2">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Full-screen viewer -->
    <div id="fullscreenViewer" class="fullscreen-viewer">
        <button class="viewer-nav viewer-prev" onclick="navigateViewer(-1)">‚ùÆ</button>
        <div class="viewer-content">
            <button class="viewer-close" onclick="closeViewer()">&times;</button>
            <div id="viewerMedia"></div>
        </div>
        <button class="viewer-nav viewer-next" onclick="navigateViewer(1)">‚ùØ</button>
    </div>

    <script>
        // Video intro logic
        let currentVideoIndex = 0;
        const videos = ['gif.mp4','wish.mp4'];
        const videoOverlay = document.getElementById('videoOverlay');
        const introVideo = document.getElementById('introVideo');
        const tapToPlay = document.getElementById('tapToPlay');
        const skipButton = document.getElementById('skipButton');
        const videoStatus = document.getElementById('videoStatus');
        const mainContainer = document.getElementById('mainContainer');
        const photosGrid = document.getElementById('photosGrid');
        const videosGrid = document.getElementById('videosGrid');

        // Full-screen viewer state
        let currentViewerIndex = 0;
        let currentViewerType = ''; // 'photos' or 'videos'
        const photosData = [];
        const videosData = [];

        // Function to format date from file creation/modified date
        function formatFileDate(date) {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const month = months[date.getMonth()];
            const day = date.getDate();
            const year = date.getFullYear();
            return `${month} ${day}, ${year}`;
        }

        // Function to extract date from file (simulated for demo)
        function getFileDate(fileSrc) {
            // In a real implementation, you would fetch the actual file metadata
            // For this demo, we'll simulate extracting dates based on the file name or URL
            
            // Check if it's a local file
            if (fileSrc.includes('wish.mp4')) {
                return formatFileDate(new Date(2022, 0, 15)); // Jan 15, 2022
            } else if (fileSrc.includes('memories.mp4')) {
                return formatFileDate(new Date(2022, 2, 22)); // Mar 22, 2022
            }
            
            // For Unsplash images, we'll use a mapping
            const dateMap = {
                '1.JPG': new Date(2022, 10, 14), // Nov 14, 2022
                'photo-1511988617509-a57c8a288659': new Date(2022, 2, 15), // Mar 15, 2022
                'photo-1501594907352-04cda38ebc29': new Date(2022, 5, 8),  // Jun 8, 2022
                'photo-1502086223501-7ea6ecd79368': new Date(2022, 7, 3),  // Aug 3, 2022
                'photo-1469474968028-56623f02e42e': new Date(2022, 9, 17), // Oct 17, 2022
                'photo-1506905925346-21bda4d32df4': new Date(2022, 11, 5), // Dec 5, 2022
                'mov_bbb': new Date(2023, 1, 14), // Feb 14, 2023
                'movie': new Date(2023, 4, 21)    // May 21, 2023
            };
            
            // Find matching key in the URL
            for (const key in dateMap) {
                if (fileSrc.includes(key)) {
                    return formatFileDate(dateMap[key]);
                }
            }
            
            // Default to current date if no match found
            return formatFileDate(new Date());
        }

        // Sample data for memories with dates extracted from files
        const memoriesData = [
            { type: 'image', src: 'images/red (1).jpg', title: 'Memory 1' },
            { type: 'image', src: 'images/red (2).jpg', title: 'Memory 2' },
            { type: 'image', src: 'images/red (3).jpg', title: 'Memory 3' },
            { type: 'image', src: 'images/red (4).jpg', title: 'Memory 4' },
            { type: 'image', src: 'images/red (5).jpg', title: 'Memory 5' },
            { type: 'image', src: 'images/red (6).jpg', title: 'Memory 6' },
            { type: 'image', src: 'images/red (7).jpg', title: 'Memory 7' },
            { type: 'image', src: 'images/red (8).jpg', title: 'Memory 8' },
            { type: 'image', src: 'images/red (9).jpg', title: 'Memory 9' },
            { type: 'image', src: 'images/red (10).jpg', title: 'Memory 10' },
            { type: 'image', src: 'images/red (11).jpg', title: 'Memory 11' },
            { type: 'image', src: 'images/red (12).jpg', title: 'Memory 12' },
            { type: 'image', src: 'images/red (13).jpg', title: 'Memory 13' },
            { type: 'image', src: 'images/red (14).jpg', title: 'Memory 14' },
            { type: 'image', src: 'images/red (15).jpg', title: 'Memory 15' },
            { type: 'image', src: 'images/red (16).jpg', title: 'Memory 16' },
            { type: 'image', src: 'images/red (17).jpg', title: 'Memory 17' },
            { type: 'image', src: 'images/red (18).jpg', title: 'Memory 18' },
            { type: 'image', src: 'images/red (19).jpg', title: 'Memory 19' },
            { type: 'image', src: 'images/red (20).jpg', title: 'Memory 20' },
            { type: 'image', src: 'images/red (21).jpg', title: 'Memory 21' },
            { type: 'image', src: 'images/red (22).jpg', title: 'Memory 22' },
            { type: 'image', src: 'images/red (23).jpg', title: 'Memory 23' },
            { type: 'image', src: 'images/red (24).jpg', title: 'Memory 24' },
            { type: 'image', src: 'images/red (25).jpg', title: 'Memory 25' },
            { type: 'image', src: 'images/red (26).jpg', title: 'Memory 26' },
            { type: 'image', src: 'images/red (27).jpg', title: 'Memory 27' },
            { type: 'image', src: 'images/red (28).jpg', title: 'Memory 28' },
            { type: 'image', src: 'images/red (29).jpg', title: 'Memory 29' },
            { type: 'image', src: 'images/red (30).jpg', title: 'Memory 30' },
            { type: 'image', src: 'images/red (31).jpg', title: 'Memory 31' },
            { type: 'image', src: 'images/red (32).jpg', title: 'Memory 32' },
            { type: 'image', src: 'images/red (33).jpg', title: 'Memory 33' },
            { type: 'image', src: 'images/red (34).jpg', title: 'Memory 34' },
            { type: 'image', src: 'images/red (35).jpg', title: 'Memory 35' },
            { type: 'image', src: 'images/red (36).jpg', title: 'Memory 36' },
            { type: 'image', src: 'images/red (37).jpg', title: 'Memory 37' },
            { type: 'image', src: 'images/red (38).jpg', title: 'Memory 38' },
            { type: 'image', src: 'images/red (39).jpg', title: 'Memory 39' },
            { type: 'image', src: 'images/red (40).jpg', title: 'Memory 40' },
            { type: 'image', src: 'images/red (41).jpg', title: 'Memory 41' },
            { type: 'image', src: 'images/5 (1).jpg', title: 'Memory 5-1' },
            { type: 'image', src: 'images/5 (2).jpg', title: 'Memory 5-2' },
            { type: 'image', src: 'images/5 (3).jpg', title: 'Memory 5-3' },
            { type: 'image', src: 'images/5 (4).jpg', title: 'Memory 5-4' },
            { type: 'image', src: 'images/5 (5).jpg', title: 'Memory 5-5' },
            { type: 'image', src: 'images/5 (6).jpg', title: 'Memory 5-6' },
            { type: 'image', src: 'images/5 (7).jpg', title: 'Memory 5-7' },
            { type: 'image', src: 'images/5 (8).jpg', title: 'Memory 5-8' },
            { type: 'image', src: 'images/5 (9).jpg', title: 'Memory 5-9' },
            { type: 'image', src: 'images/5 (10).jpg', title: 'Memory 5-10' },
            { type: 'image', src: 'images/5 (11).jpg', title: 'Memory 5-11' },
            { type: 'image', src: 'images/5 (12).jpg', title: 'Memory 5-12' },
            { type: 'image', src: 'images/5 (13).jpg', title: 'Memory 5-13' },
            { type: 'image', src: 'images/5 (14).jpg', title: 'Memory 5-14' },
            { type: 'image', src: 'images/5 (15).jpg', title: 'Memory 5-15' },
            { type: 'image', src: 'images/5 (16).jpg', title: 'Memory 5-16' },
            { type: 'image', src: 'images/5 (17).jpg', title: 'Memory 5-17' },
            { type: 'image', src: 'images/2 (1).jpg', title: 'Memory 2-1' },
            { type: 'image', src: 'images/2 (2).jpg', title: 'Memory 2-2' },
            { type: 'image', src: 'images/2 (3).jpg', title: 'Memory 2-3' },
            { type: 'image', src: 'images/2 (4).jpg', title: 'Memory 2-4' },
            { type: 'image', src: 'images/2 (5).jpg', title: 'Memory 2-5' },
            { type: 'image', src: 'images/2 (6).jpg', title: 'Memory 2-6' },
            { type: 'image', src: 'images/2 (7).jpg', title: 'Memory 2-7' },
            { type: 'image', src: 'images/2 (8).jpg', title: 'Memory 2-8' },
            { type: 'image', src: 'images/2 (9).jpg', title: 'Memory 2-9' },
            { type: 'image', src: 'images/2 (10).jpg', title: 'Memory 2-10' },
            { type: 'image', src: 'images/2 (11).jpg', title: 'Memory 2-11' },
            { type: 'image', src: 'images/2 (12).jpg', title: 'Memory 2-12' },
            { type: 'image', src: 'images/2 (13).jpg', title: 'Memory 2-13' },
            { type: 'image', src: 'images/2 (14).jpg', title: 'Memory 2-14' },
            { type: 'image', src: 'images/2 (15).jpg', title: 'Memory 2-15' },
            { type: 'image', src: 'images/2 (16).jpg', title: 'Memory 2-16' },
            { type: 'image', src: 'images/2 (17).jpg', title: 'Memory 2-17' },
            { type: 'image', src: 'images/2 (18).jpg', title: 'Memory 2-18' },
            { type: 'image', src: 'images/2 (19).jpg', title: 'Memory 2-19' },
            { type: 'image', src: 'images/2 (20).jpg', title: 'Memory 2-20' },
            { type: 'image', src: 'images/2 (21).jpg', title: 'Memory 2-21' },
            { type: 'image', src: 'images/2 (22).jpg', title: 'Memory 2-22' },
            { type: 'image', src: 'images/2 (23).jpg', title: 'Memory 2-23' },
            { type: 'image', src: 'images/2 (24).jpg', title: 'Memory 2-24' },

            { type: 'video', src: 'videos/1.mp4', title: 'Video 1' },
            { type: 'video', src: 'videos/2.mp4', title: 'Video 2' },
            { type: 'video', src: 'videos/3.mp4', title: 'Video 3' },
            { type: 'video', src: 'videos/4.mp4', title: 'Video 4' },
            { type: 'video', src: 'videos/5.mp4', title: 'Video 5' },
            { type: 'video', src: 'videos/6.mp4', title: 'Video 6' },
            { type: 'video', src: 'videos/7.mp4', title: 'Video 7' },
            { type: 'video', src: 'videos/8.mp4', title: 'Video 8' },
            { type: 'video', src: 'videos/9.mp4', title: 'Video 9' },
            { type: 'video', src: 'videos/10.mp4', title: 'Video 10' },
            { type: 'video', src: 'videos/11.mp4', title: 'Video 11' },
            { type: 'video', src: 'videos/12.mp4', title: 'Video 12' },
            { type: 'video', src: 'videos/13.mp4', title: 'Video 13' },
            { type: 'video', src: 'videos/14.mp4', title: 'Video 14' },
            { type: 'video', src: 'videos/15.mp4', title: 'Video 15' },
            { type: 'video', src: 'videos/16.mp4', title: 'Video 16' },
            { type: 'video', src: 'videos/17.mp4', title: 'Video 17' },
            { type: 'video', src: 'videos/18.mp4', title: 'Video 18' },
            { type: 'video', src: 'videos/19.mp4', title: 'Video 19' },
            { type: 'video', src: 'videos/20.mp4', title: 'Video 20' },
            { type: 'video', src: 'videos/21.mp4', title: 'Video 21' },
            { type: 'video', src: 'videos/22.mp4', title: 'Video 22' },
            { type: 'video', src: 'videos/23.mp4', title: 'Video 23' },
            { type: 'video', src: 'videos/24.mp4', title: 'Video 24' },
            { type: 'video', src: 'videos/25.mp4', title: 'Video 25' }
        ];

        // Populate photos and videos grids with dates extracted from files
        function populateMemoriesGrid() {
            photosGrid.innerHTML = '';
            videosGrid.innerHTML = '';
            
            memoriesData.forEach((memory, index) => {
                // Extract date from file
                const fileDate = getFileDate(memory.src);
                
                if (memory.type === 'image') {
                    // Create photo gallery item
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    
                    galleryItem.innerHTML = `
                        <img src="${memory.src}" alt="${memory.title}">
                    
                    `;
                    galleryItem.onclick = () => openViewer('photos', index);
                    photosGrid.appendChild(galleryItem);
                    photosData.push(memory);
                } else {
                    // Create video card item
                    const videoCard = document.createElement('div');
                    videoCard.className = 'video-card';
                    
                    videoCard.innerHTML = `
                        <div class="video-thumbnail">
                            
                            <button class="play-button" onclick="openVideoViewer(${index})">‚ñ∂Ô∏è</button>
                        </div>
                        <div class="video-info">
                            
                            
                        </div>
                    `;
                    videosGrid.appendChild(videoCard);
                    videosData.push(memory);
                }
            });
        }

        // Update video status
        function updateStatus(text) {
            videoStatus.textContent = text;
        }

        // Play current video
        function playCurrentVideo() {
            tapToPlay.style.display = 'none';
            skipButton.style.display = 'block';
            updateStatus(`Playing video ${currentVideoIndex + 1} of ${videos.length}...`);
            
            // Ensure audio is enabled
            introVideo.muted = false;
            
            introVideo.play().catch(err => {
                console.log('Autoplay failed:', err);
                tapToPlay.style.display = 'block';
                updateStatus('Tap to play video');
            });
        }

        // Skip video function - FIXED: Properly handles skipping
        function skipVideo() {
            // Move to the next video or finish
            currentVideoIndex++;
            
            if (currentVideoIndex < videos.length) {
                introVideo.src = videos[currentVideoIndex];
                playCurrentVideo();
            } else {
                // All videos finished or skipped, show main site
                showMainPage();
            }
        }

        // Handle video end
        introVideo.addEventListener('ended', () => {
            currentVideoIndex++;
            
            if (currentVideoIndex < videos.length) {
                introVideo.src = videos[currentVideoIndex];
                playCurrentVideo();
            } else {
                // All videos finished, show main site
                showMainPage();
            }
        });

        // Show main page and hide video overlay
        function showMainPage() {
            videoOverlay.classList.add('hidden');
            mainContainer.classList.remove('hidden');
            
            // Reset video state for next time
            currentVideoIndex = 0;
            introVideo.src = videos[currentVideoIndex];
        }

        // Tap to play handler
        tapToPlay.addEventListener('click', () => {
            playCurrentVideo();
        });

        // Skip button handler
        skipButton.addEventListener('click', () => {
            skipVideo();
        });

        // Initialize the page - show main content directly
        window.addEventListener('load', () => {
            populateMemoriesGrid();
            // Show main page directly without playing videos
            showMainPage();
        });

        // Navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Remove active from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Highlight active nav button
            event.target.classList.add('active');
            
            // Close mobile menu
            document.getElementById('sidebar').classList.remove('open');
        }

        // Mobile menu toggle
        function toggleMenu() {
            document.getElementById('sidebar').classList.toggle('open');
        }

        // Play video again function
        function playVideoAgain() {
            // Reset video index and show video overlay
            currentVideoIndex = 0;
            introVideo.src = videos[currentVideoIndex];
            videoOverlay.classList.remove('hidden');
            mainContainer.classList.add('hidden');
            playCurrentVideo();
            
            // Close mobile menu
            document.getElementById('sidebar').classList.remove('open');
        }

        // Full-screen viewer functions
        function openViewer(type, index) {
            currentViewerType = type;
            currentViewerIndex = index;
            
            const viewer = document.getElementById('fullscreenViewer');
            const viewerMedia = document.getElementById('viewerMedia');
            
            // Clear previous content
            viewerMedia.innerHTML = '';
            
            // Create the media element
            let mediaElement;
            const data = type === 'photos' ? photosData : videosData;
            
            if (type === 'photos') {
                mediaElement = document.createElement('img');
                mediaElement.src = data[index].src;
                mediaElement.alt = data[index].title;
            } else {
                mediaElement = document.createElement('video');
                mediaElement.src = data[index].src;
                mediaElement.controls = true;
                mediaElement.autoplay = true;
                mediaElement.muted = false;
            }
            
            viewerMedia.appendChild(mediaElement);
            viewer.classList.add('active');
            
            // Add keyboard navigation
            document.addEventListener('keydown', handleViewerKeydown);
        }

        function openVideoViewer(index) {
            // Find the video in the memoriesData array
            const videoIndex = memoriesData.findIndex((item, i) => 
                item.type === 'video' && i === index
            );
            
            if (videoIndex !== -1) {
                openViewer('videos', videoIndex - photosData.length);
            }
        }

        function closeViewer() {
            const viewer = document.getElementById('fullscreenViewer');
            const video = viewer.querySelector('video');
            
            if (video) {
                video.pause();
            }
            
            viewer.classList.remove('active');
            
            // Remove keyboard navigation
            document.removeEventListener('keydown', handleViewerKeydown);
        }

        function navigateViewer(direction) {
            const data = currentViewerType === 'photos' ? photosData : videosData;
            currentViewerIndex = (currentViewerIndex + direction + data.length) % data.length;
            
            // Close and reopen viewer with new content
            closeViewer();
            openViewer(currentViewerType, currentViewerIndex);
        }

        function handleViewerKeydown(e) {
            if (e.key === 'Escape') {
                closeViewer();
            } else if (e.key === 'ArrowLeft') {
                navigateViewer(-1);
            } else if (e.key === 'ArrowRight') {
                navigateViewer(1);
            }
        }
    </script>
</body>
</html>